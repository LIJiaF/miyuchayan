webpackJsonp([4],{"3ySr":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{cur_index:-1,last_type:"",last_name:"",table_data:[],cur_page:1,page_size:0,total:0}},created:function(){this.getData()},methods:{getData:function(){var e=this,t={cur_page:arguments.length>0&&void 0!==arguments[0]?arguments[0]:1};this.$axios.get("/api/admin/discount/type",{params:t}).then(function(t){e.table_data=t.data.data,e.page_size=t.data.page_size,e.total=t.data.total}).catch(function(e){console.log(e)})},handleSave:function(e){var t=this,a=new FormData;a.append("id",e.id),a.append("type",e.type),a.append("name",e.name),this.$axios.put("/api/admin/discount/type",a).then(function(e){e.data.code?t.$message({message:e.data.msg,type:"error",showClose:!0}):(t.cur_index=-1,t.$message({message:e.data.msg,type:"success",showClose:!0}))}).catch(function(e){console.log(e)})},handleCancel:function(e){var t=this;this.table_data.map(function(a){a.id==e.id&&(a.type=t.last_type,a.name=t.last_name)}),this.cur_index=-1,this.$message({type:"info",message:"已取消",showClose:!0})},handleEdit:function(e){-1==this.cur_index?(this.last_type=e.type,this.last_name=e.name,this.cur_index=e.id):this.$message({message:"请保存或取消！",type:"warning",showClose:!0})},handleDelete:function(e){var t=this;this.$confirm("此操作将永久删除该优惠券类型, 是否继续?","提示",{cancelButtonText:"取消",confirmButtonText:"确定",type:"warning",center:!0}).then(function(){var a=new FormData;a.append("id",e.id),t.$axios.delete("/api/admin/discount/type",{data:a}).then(function(e){e.data.code?t.$message({message:e.data.msg,type:"error",showClose:!0}):(t.cur_page>1&&t.table_data.length<=(t.cur_page-1)*t.page_size+1&&(t.cur_page=t.cur_page-1),t.getData(t.cur_page),t.$message({type:"success",message:e.data.msg,showClose:!0}))}).catch(function(e){console.log(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除",showClose:!0})})},currentChange:function(e){this.cur_page=e,this.getData(e)}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"main"},[a("div",{staticClass:"banner"},[a("router-link",{attrs:{to:"/discount/type/add"}},[a("el-button",{attrs:{size:"medium",type:"primary"}},[e._v("新增")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.table_data}},[a("el-table-column",{attrs:{align:"center",label:"类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.cur_index==t.row.id?a("el-input",{attrs:{placeholder:"类型"},model:{value:t.row.type,callback:function(a){e.$set(t.row,"type",a)},expression:"scope.row.type"}}):a("span",[e._v(e._s(t.row.type))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.cur_index==t.row.id?a("el-input",{attrs:{placeholder:"名称"},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}}):a("span",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"right","min-width":"95",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[e.cur_index==t.row.id?a("div",[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleSave(t.row)}}},[e._v("保存\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.handleCancel(t.row)}}},[e._v("取消\n          ")])],1):a("div",[a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleEdit(t.row)}}},[e._v("修改\n          ")]),e._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleDelete(t.row)}}},[e._v("删除\n          ")])],1)]}}])})],1),e._v(" "),a("div",{staticClass:"footer"},[a("el-pagination",{attrs:{background:"","page-size":e.page_size,layout:"prev, pager, next",total:e.total},on:{"current-change":e.currentChange}})],1)],1)},staticRenderFns:[]};var o=a("VU/8")(n,s,!1,function(e){a("MDcN")},"data-v-6b270672",null);t.default=o.exports},MDcN:function(e,t){}});
//# sourceMappingURL=4.eb5b4bfb178aba8f76a3.js.map